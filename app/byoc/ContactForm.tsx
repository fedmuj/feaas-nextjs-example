'use client'
import * as FEAAS from '@sitecore-feaas/clientside/react'
import React, { useState } from 'react';  
import { Box, Button, FormControl, FormLabel, Input, Textarea, VStack } from '@chakra-ui/react';  
  
const ContactForm = () => {  
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [message, setMessage] = useState('');

  const handleSubmit = (event) => {  
    event.preventDefault();  
    const payload = {
      email: email,
      name: name
    };
    fetch('https://api.moosend.com/v3/subscribers/c8d73097-a105-4646-aa48-931d4504d388/subscribe.json?apikey=0857607a-09be-49c6-a271-61ddfd2b1c75', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(payload)
    })
    .then(response => response.json())
    .then(data => {
      // handle the response from the API
      console.log(data);
    })
    .catch(error => {
      // handle any errors
      console.error(error);
    });
  };  
  
  return (  
    <Box w="400px" p={4} boxShadow="md" borderRadius="md">  
      <form onSubmit={handleSubmit}>  
        <VStack spacing={4}>  
          <FormControl id="name">  
            <FormLabel>Name</FormLabel>  
            <Input type="text" required value={name} onChange={(e) => setName(e.target.value)} />  
          </FormControl>  
          <FormControl id="email">  
            <FormLabel>Email</FormLabel>  
            <Input type="email" required value={email} onChange={(e) => setEmail(e.target.value)} />  
          </FormControl>  
          <FormControl id="message">  
            <FormLabel>Message</FormLabel>  
            <Textarea required value={message} onChange={(e) => setMessage(e.target.value)} />  
          </FormControl>  
          <Button type="submit" colorScheme="blue">Submit</Button>  
        </VStack>  
      </form>  
    </Box>  
  );  
};  

FEAAS.registerComponent(ContactForm , {
  name: 'contact-form',
  title: 'ContactForm',
  description: 'This is a Contact Form Generated by AI',
  thumbnail: 'https://mss-p-006-delivery.stylelabs.cloud/api/public/content/3997aaa0d8be4eb789f3b1541bd95c58',
  group: 'AI Generated Components',
  required: [],
  properties: {}
})
 
export default ContactForm;